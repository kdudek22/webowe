<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h1>Dane zdefiniowane w js, losowane po refresh</h1>
        <canvas id="canvas" width="400" height="400" style="border: 1px solid black;"></canvas>
    </div>
</body>
<script>
    const canvas = document.getElementById("canvas")
    const ctx = canvas.getContext("2d")

    const length = Math.floor(Math.random() * 5) + 2
    const data = Array.from({ length }, () => Math.floor(Math.random() * 10) + 1)

    ctx.clearRect(0,0, canvas.width, canvas.height)

    const total = data.reduce((a,b) => a+b, 0)

    let startAngle = 0

    data.forEach((value, i) =>{
        const sliceAngle = (value / total) * Math.PI * 2
        const endAngle = startAngle + sliceAngle

        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, canvas.height/2)
        ctx.arc(canvas.width / 2, canvas.height / 2, 100, startAngle, endAngle)

        ctx.closePath()

        ctx.fillStyle = randomColor()
        ctx.fill()

        startAngle = endAngle
    })

    function randomColor() {
        return `hsl(${Math.random() * 360}, 70%, 60%)`;
    }


    console.log("asd")
</script>
</html>